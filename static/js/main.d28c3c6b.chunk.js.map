{"version":3,"sources":["lib/encryptor.js","actions/generalActions.js","components/Header.jsx","components/Icons.jsx","components/Loader.jsx","components/NoteEditor.jsx","components/Note.jsx","components/NoteList.jsx","components/ProtonNote.jsx","serviceWorker.js","reducers/generalReducer.js","reducers/rootReducer.js","store.js","index.js"],"names":["wait","delay","Promise","resolve","reject","setTimeout","encrypt","data","a","decrypt","setEditNote","state","type","payload","setIsLoading","createNote","noteObject","setActiveNote","id","Header","isLoading","useSelector","general","isEditingNote","editMode","dispatch","useDispatch","className","onClick","disabled","Edit","color","aria-hidden","focusable","data-prefix","data-icon","role","xmlns","viewBox","fill","d","Save","Cancel","Trash","Loader","NoteEditor","isNewNote","activeNoteId","note","activeNote","useState","title","setTitle","markdown","setMarkdown","isFirstRun","useRef","handleSaveNote","getState","encryptedMarkdown","updateNote","handleDeleteNote","removeNote","removeSelectedNote","useEffect","current","decryptedMarkdown","processNoteEncryption","value","onChange","e","target","name","plugins","gfm","rawSourcePos","children","undefined","Note","active","Boolean","NoteList","notes","map","index","key","ProtonNote","updateNotes","window","location","hostname","match","generalState","generalReducer","action","length","filter","rootReducer","combineReducers","store","createStore","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.d28c3c6b.chunk.js","sourcesContent":["const wait = (delay) => {\n    return new Promise((resolve, reject) => {\n        setTimeout(resolve, delay);\n    });\n};\n\nexport const encrypt = async (data) => {\n    await wait(1000);\n    return data;\n}\n\nexport const decrypt = async (data) => {\n    await wait(1000);\n    return data;\n}","import { encrypt } from '../lib/encryptor';\n\nexport const setEditNote = (state) => ({\n\ttype: 'SET_EDIT_NOTE',\n\tpayload: state\n});\n\nexport const setIsNewNote = (state) => ({\n\ttype: 'SET_NEW_NOTE',\n\tpayload: state\n});\n\nexport const setIsLoading = (state) => ({\n\ttype: 'SET_IS_LOADING',\n\tpayload: state\n});\n\nexport const updateNotes = (notes) => ({\n\ttype: 'UPDATE_NOTES',\n\tpayload: notes\n});\n\nexport const updateNote = (id, title, markdown) => ({\n\ttype: 'UPDATE_NOTE',\n\tpayload: {\n\t\ttitle,\n\t\tmarkdown,\n\t\tid\n\t}\n});\n\nexport const createNote = (noteObject) => ({\n\ttype: 'CREATE_NOTE',\n\tpayload: noteObject\n});\n\nexport const removeNote = (id) => ({\n\ttype: 'REMOVE_NOTE',\n\tpayload: id\n})\n\nexport const setActiveNote = (id) => ({\n\ttype: 'SET_ACTIVE_NOTE',\n\tpayload: id\n});\n\nexport function createNewNote (noteObject) {\n\treturn async function (dispatch, getState) {\n\t\tdispatch(setIsLoading(true))\n\t\tconst {title, markdown} = noteObject;\n\t\tconst encryptedMarkdown = await encrypt(markdown);\n\t\tdispatch(createNote({title, markdown: encryptedMarkdown}))\n\t}\n}\n\nexport function removeSelectedNote (id) {\n\treturn function (dispatch, getState) {\n\t\tdispatch(removeNote(id));\n\t\tconst {activeNoteId} = getState().general;\n\t\tdispatch(setActiveNote(activeNoteId))\n\t}\n}","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setIsNewNote } from '../actions/generalActions';\n\nexport default function Header () {\n\tconst isLoading = useSelector(state => state.general.isLoading);\n\tconst isEditingNote = useSelector(state => state.general.editMode);\n\tconst dispatch = useDispatch();\n\n\tfunction handleCreateNote () {\n\t\tdispatch(setIsNewNote(true))\n\t}\n\n\treturn (\n\t\t<div className=\"header\">\n\t\t\t<h1>ProtonMail</h1>\n\t\t\t<button\n\t\t\t\tclassName=\"button button--link\"\n\t\t\t\tonClick={() => handleCreateNote()}\n\t\t\t\tdisabled={isEditingNote || isLoading}\n\t\t\t>New Note +</button>\n\t\t</div>\n\t)\n}","import React from \"react\";\n\nexport function Edit ({ color = \"#333\" }) {\n\treturn (\n\t\t<svg\n\t\t\taria-hidden=\"true\"\n\t\t\tfocusable=\"false\"\n\t\t\tdata-prefix=\"fal\"\n\t\t\tdata-icon=\"pen\"\n\t\t\trole=\"img\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tviewBox=\"0 0 512 512\"\n\t\t>\n\t\t\t<path\n\t\t\t\tfill={ color }\n\t\t\t\td=\"M493.25 56.26l-37.51-37.51C443.25 6.25 426.87 0 410.49 0s-32.76 6.25-45.26 18.74L12.85 371.12.15 485.34C-1.45 499.72 9.88 512 23.95 512c.89 0 1.78-.05 2.69-.15l114.14-12.61 352.48-352.48c24.99-24.99 24.99-65.51-.01-90.5zM126.09 468.68l-93.03 10.31 10.36-93.17 263.89-263.89 82.77 82.77-263.99 263.98zm344.54-344.54l-57.93 57.93-82.77-82.77 57.93-57.93c6.04-6.04 14.08-9.37 22.63-9.37 8.55 0 16.58 3.33 22.63 9.37l37.51 37.51c12.47 12.48 12.47 32.78 0 45.26z\"\n\t\t\t></path>\n\t\t</svg>\n\t);\n}\n\nexport function Save ({ color = \"#333\" }) {\n\treturn (\n\t\t<svg\n\t\t\taria-hidden=\"true\"\n\t\t\tfocusable=\"false\"\n\t\t\tdata-prefix=\"fal\"\n\t\t\tdata-icon=\"save\"\n\t\t\trole=\"img\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tviewBox=\"0 0 448 512\">\n\t\t\t<path\n\t\t\t\tfill={color}\n\t\t\t\td=\"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM288 64v96H96V64h192zm128 368c0 8.822-7.178 16-16 16H48c-8.822 0-16-7.178-16-16V80c0-8.822 7.178-16 16-16h16v104c0 13.255 10.745 24 24 24h208c13.255 0 24-10.745 24-24V64.491a15.888 15.888 0 0 1 7.432 4.195l83.882 83.882A15.895 15.895 0 0 1 416 163.882V432zM224 232c-48.523 0-88 39.477-88 88s39.477 88 88 88 88-39.477 88-88-39.477-88-88-88zm0 144c-30.879 0-56-25.121-56-56s25.121-56 56-56 56 25.121 56 56-25.121 56-56 56z\"></path>\n\t\t</svg>\n\t);\n}\n\nexport function Cancel ({ color = \"#333\" }) {\n\treturn (\n\t\t<svg\n\t\t\taria-hidden=\"true\"\n\t\t\tfocusable=\"false\"\n\t\t\tdata-prefix=\"fal\"\n\t\t\tdata-icon=\"circle\"\n\t\t\trole=\"img\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tviewBox=\"0 0 512 512\"\n\t\t>\n\t\t\t<path\n\t\t\t\tfill={color}\n\t\t\t\td=\"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm216 248c0 118.7-96.1 216-216 216-118.7 0-216-96.1-216-216 0-118.7 96.1-216 216-216 118.7 0 216 96.1 216 216z\"\n\t\t\t\t></path>\n\t\t</svg>\n\t);\n}\n\nexport function Trash ({ color = \"#333\" }) {\n\treturn (\n\t\t<svg\n\t\t\taria-hidden=\"true\"\n\t\t\tfocusable=\"false\"\n\t\t\tdata-prefix=\"fal\"\n\t\t\tdata-icon=\"trash\"\n\t\t\trole=\"img\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tviewBox=\"0 0 448 512\"\n\t\t>\n\t\t\t<path\n\t\t\t\tfill={color}\n\t\t\t\td=\"M440 64H336l-33.6-44.8A48 48 0 0 0 264 0h-80a48 48 0 0 0-38.4 19.2L112 64H8a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h18.9l33.2 372.3a48 48 0 0 0 47.8 43.7h232.2a48 48 0 0 0 47.8-43.7L421.1 96H440a8 8 0 0 0 8-8V72a8 8 0 0 0-8-8zM171.2 38.4A16.1 16.1 0 0 1 184 32h80a16.1 16.1 0 0 1 12.8 6.4L296 64H152zm184.8 427a15.91 15.91 0 0 1-15.9 14.6H107.9A15.91 15.91 0 0 1 92 465.4L59 96h330z\"\n\t\t\t\t></path>\n\t\t</svg>\n\t);\n}\n","import React from 'react';\n\nexport default function Loader () {\n\treturn (\n\t\t<div className=\"sk-folding-cube\">\n\t\t\t<div className=\"sk-cube1 sk-cube\"></div>\n\t\t\t<div className=\"sk-cube2 sk-cube\"></div>\n\t\t\t<div className=\"sk-cube4 sk-cube\"></div>\n\t\t\t<div className=\"sk-cube3 sk-cube\"></div>\n\t\t</div>\n\t)\n}","import React, { useState, useEffect, useRef } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport gfm from 'remark-gfm';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { createNewNote, removeSelectedNote, setEditNote, setIsLoading, updateNote } from '../actions/generalActions';\nimport { Cancel, Edit, Save, Trash } from './Icons';\nimport Loader from './Loader';\nimport { decrypt } from '../lib/encryptor';\n\nexport default function NoteEditor () {\n\t// General\n\tconst isLoading = useSelector(state => state.general.isLoading);\n\tconst isEditingNote = useSelector(state => state.general.editMode);\n\tconst isNewNote = useSelector(state => state.general.isNewNote);\n\tconst id = useSelector(state => state.general.activeNoteId);\n\tconst note = useSelector(state => state.general.activeNote);\n\t// Local\n\tconst [title, setTitle] = useState('');\n\tconst [markdown, setMarkdown] = useState('');\n\t// Tools\n\tconst isFirstRun = useRef(true);\n\tconst dispatch = useDispatch();\n\n\tfunction handleSaveNote () {\n\t\tif(isNewNote) dispatch(createNewNote({title, markdown}))\n\t\telse dispatch(updateNote(id, title, markdown));\n\t}\n\n\tfunction handleCancelChanges () {\n\t\tif(note) {\n\t\t\tsetTitle(note.title);\n\t\t\tsetMarkdown(note.markdown);\n\t\t} else {\n\t\t\tsetTitle('');\n\t\t\tsetMarkdown('');\n\t\t}\n\t\tdispatch(setEditNote(false));\n\t}\n\n\tfunction handleDeleteNote () {\n\t\tdispatch(removeSelectedNote(id))\n\t}\n\n\tfunction renderEditorControls () {\n\t\tif(isEditingNote) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t<button className=\"button button--icon\" onClick={() => handleCancelChanges()}>\n\t\t\t\t\t<Cancel />\n\t\t\t\t\t<p>Cancel</p>\n\t\t\t\t</button>\n\t\t\t\t<div className=\"group\">\n\t\t\t\t\t<button className=\"button button--icon\" onClick={() => handleSaveNote()}>\n\t\t\t\t\t\t<Save />\n\t\t\t\t\t\t<p>Save</p>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button className=\"button button--icon\" onClick={() => handleDeleteNote()}>\n\t\t\t\t\t\t<Trash />\n\t\t\t\t\t\t<p>Delete</p>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<button className=\"button button--icon margin-auto--left\" onClick={() => dispatch(setEditNote(true))}>\n\t\t\t\t\t<Edit />\n\t\t\t\t\t<p>Edit</p>\n\t\t\t\t</button>\n\t\t\t)\n\t\t}\n\t}\n\n\tfunction renderEditorBody () {\n\t\tif(isLoading) return <Loader />\n\n\t\tif(isEditingNote && !isLoading) {\n\t\t\treturn <textarea name=\"editor__body\" id=\"editorNoteBody\" value={markdown} onChange={(e) => setMarkdown(e.target.value)}></textarea>\n\t\t} else {\n\t\t\treturn <ReactMarkdown className=\"markdown-editor\" plugins={[gfm]} rawSourcePos={true} children={markdown} />\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tif(isFirstRun.current) { return; }\n\t\tconst processNoteEncryption = async () => {\n\t\t\tdispatch(setIsLoading(true));\n\t\t\tif(note && !isNewNote) {\n\t\t\t\tsetTitle(note.title);\n\t\t\t\tconst decryptedMarkdown = await decrypt(note.markdown);\n\t\t\t\tsetMarkdown(decryptedMarkdown);\n\t\t\t} else {\n\t\t\t\tsetTitle('');\n\t\t\t\tsetMarkdown('');\n\t\t\t}\n\t\t\tdispatch(setIsLoading(false));\n\t\t}\n\t\tprocessNoteEncryption ();\n\t}, [note, isEditingNote]);\n\n\tuseEffect(() => {\n\t\tif(isFirstRun) { isFirstRun.current = false; }\n\t}, []);\n\n\treturn (\n\t\t<div className=\"editor\">\n\t\t\t<div className=\"editor__title\">\n\t\t\t\t<input type=\"text\" value={title} onChange={(e) => setTitle(e.target.value)}/>\n\t\t\t</div>\n\t\t\t<div className=\"editor__body\">\n\t\t\t\t{ renderEditorBody() }\n\t\t\t\t<div className=\"editor__controls\" disabled={isLoading || (note === undefined && !isEditingNote)}>\n\t\t\t\t\t{ renderEditorControls() }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setActiveNote } from '../actions/generalActions';\n\nexport default function Note ({title, active, id, disabled}) {\n\tconst isEditingNote = useSelector(state => state.general.editMode);\n\tconst dispatch = useDispatch();\n\n\tfunction handleNoteSelection () {\n\t\tdispatch(setActiveNote(id));\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`note ${active ? 'note--active' : ''}`}\n\t\t\tonClick={() => handleNoteSelection()}\n\t\t\tdisabled={Boolean(isEditingNote && (!active || disabled))}\n\t\t>\n\t\t\t<h2 className=\"note__title\">{title}</h2>\n\t\t</div>\n\t);\n}","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport Note from './Note';\n\nexport default function NoteList () {\n\tconst isLoading = useSelector(state => state.general.isLoading);\n\tconst notes = useSelector(state => state.general.notes);\n\tconst activeNoteId = useSelector(state => state.general.activeNoteId);\n\n\treturn (\n\t\t<div className=\"notelist\">\n\t\t\t{\n\t\t\t\tnotes.map((note, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Note\n\t\t\t\t\t\t\ttitle={note.title}\n\t\t\t\t\t\t\tkey={`note_${index}`}\n\t\t\t\t\t\t\tactive={activeNoteId === index}\n\t\t\t\t\t\t\tid={index}\n\t\t\t\t\t\t\tdisabled={isLoading}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t}\n\t\t</div>\n\t);\n}\n","import React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { updateNotes } from '../actions/generalActions';\n\n// Components\nimport Header from './Header';\nimport NoteEditor from './NoteEditor';\nimport NoteList from './NoteList';\n\n\nexport default function ProtonNote () {\n\tconst dispatch = useDispatch();\n\t\n\t// Get all notes here\n\tconst notes = [];\n\n\tuseEffect(() => {\n\t\tdispatch(updateNotes(notes))\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Header />\n\t\t\t<main>\n\t\t\t\t<NoteList notes={notes}/>\n\t\t\t\t<NoteEditor />\n\t\t\t</main>\n\t\t</>\n\t)\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","const generalState = {\n\tisLoading: false,\n\tisNewNote: false,\n\teditMode: false,\n\tnotes: [],\n\tactiveNoteId: 0,\n};\n\nconst generalReducer = (state = generalState, action) => {\n\tswitch(action.type) {\n\t\tcase \"SET_EDIT_NOTE\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\teditMode: action.payload,\n\t\t\t\tisNewNote: false\n\t\t\t}\n\t\tcase \"SET_NEW_NOTE\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisNewNote: action.payload,\n\t\t\t\teditMode: action.payload,\n\t\t\t\tactiveNote: undefined\n\t\t\t}\n\t\tcase \"SET_IS_LOADING\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLoading: action.payload\n\t\t\t}\n\t\tcase \"UPDATE_NOTES\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tnotes: action.payload,\n\t\t\t\tactiveNote: action.payload[state.activeNoteId]\n\t\t\t}\n\t\tcase \"UPDATE_NOTE\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tnotes: state.notes.map((note, index) => {\n\t\t\t\t\tif(index === action.payload.id)\n\t\t\t\t\t\treturn {title: action.payload.title, markdown: action.payload.markdown};\n\t\t\t\t\telse return note;\n\t\t\t\t}),\n\t\t\t\tactiveNote: {title: action.payload.title, markdown: action.payload.markdown},\n\t\t\t\tactiveNoteId: action.payload.id,\n\t\t\t\teditMode: false,\n\t\t\t}\n\t\tcase \"CREATE_NOTE\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tnotes: [...state.notes, action.payload],\n\t\t\t\tactiveNoteId: state.notes.length, // Why it works? Ids start from 0, the length from 1.\n\t\t\t\tactiveNote: action.payload,\n\t\t\t\teditMode: false,\n\t\t\t\tisNewNote: false,\n\t\t\t\tisLoading: false\n\t\t\t}\n\t\tcase \"REMOVE_NOTE\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tactiveNoteId: state.activeNoteId > 0 ? (state.activeNoteId - 1) : 0,\n\t\t\t\tnotes: state.notes.filter((note, index) => index !== action.payload),\n\t\t\t\teditMode: false\n\t\t\t}\n\t\tcase \"SET_ACTIVE_NOTE\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tactiveNoteId: action.payload,\n\t\t\t\tactiveNote: state.notes[action.payload]\n\t\t\t}\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\nexport default generalReducer;","import { combineReducers } from 'redux';\nimport generalReducer from './generalReducer';\n\nconst rootReducer = combineReducers({\n\tgeneral: generalReducer\n});\nexport default rootReducer;","import { createStore, applyMiddleware } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport thunk from \"redux-thunk\";\nimport rootReducer from \"./reducers/rootReducer\";\n\nconst store = createStore(\n\trootReducer,\n\tcomposeWithDevTools(applyMiddleware(thunk))\n);\nexport default store;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport ProtonNote from \"./components/ProtonNote\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport store from \"./store\";\n\nimport \"./styles/global.scss\";\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<React.StrictMode>\n\t\t\t<ProtonNote />\n\t\t</React.StrictMode>\n\t</Provider>,\n\tdocument.getElementById(\"protonnote\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}